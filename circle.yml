machine:
  # Set the timezeone - any value from /usr/share/zoneinfo/ is valid here
  timezone:
    Europe/Vilnius

  node:
    version: 6.9.1

general:
  artifacts:
    - "coverage/lcov-report" # Unit test coverage

machine:
  post:
    - npm install -g codeclimate-test-reporter sequelize-cli

test:
  pre:
    - sequelize db:migrate

  post:
    - codeclimate-test-reporter < /home/ubuntu/leoboto/coverage/lcov.info

deployment:
  production:
    branch: master
    commands:
      - ssh deividas_karzinauskas@104.199.21.108 "cd leoboto; git pull; npm install --production; sequelize db:migrate; forever restart index.js; exit"